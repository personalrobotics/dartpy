#==============================================================================
#
# Arguments that will be appended in-order before command line arguments.
#
#==============================================================================
arguments:
  - "-extra-arg"
  - "-I/usr/lib/clang/3.6/include"

#==============================================================================
#
# Binding
#
#==============================================================================
binding: "pybind11"

#==============================================================================
#
# Template
#
#==============================================================================
template:
  module: !file
    'templates/module.mstch.cpp'
  class: !file
    'templates/class.mstch.cpp'
  enum: !file
    'templates/enum.mstch.cpp'
  function: !file
    'templates/function.mstch.cpp'
  variable: !file
    'templates/variable.mstch.cpp'
  file:
    header: |
      #include <dartpy/pointers.h>
      #include <dartpy/template_registry.h>
      #include <dart/dart.hpp>
      #include <dart/collision/bullet/bullet.hpp>
      // #include <dart/collision/ode/ode.hpp>
      #include <dart/optimizer/optimizer.hpp>
      #include <dart/optimizer/nlopt/nlopt.hpp>
      #include <dart/planning/planning.hpp>
      #include <dart/utils/utils.hpp>
      #include <dart/utils/urdf/urdf.hpp>
      #include <dart/gui/gui.hpp>
    precontent:
      '/* precontent */'
    postinclude:
      '/* postinclude */'
    footer:
      '/* footer */'
    # TODO: Put this at the bottom of the module:
    # dart::python::JointTemplateRegistry::register_default_types();
    # dart::python::JointAndNodeTemplateRegistry::register_default_types();
  main:
    header: |
      #include <vector>
      #include <dartpy/pointers.h>
      #include <dartpy/collections.h>
      #include <dartpy/util.h>
      #include <dart/dart.hpp>
      #include <dart/collision/bullet/bullet.hpp>
      // #include <dart/collision/ode/ode.hpp>
      #include <dart/optimizer/optimizer.hpp>
      #include <dart/optimizer/nlopt/nlopt.hpp>
      #include <dart/planning/planning.hpp>
      #include <dart/utils/utils.hpp>
      #include <dart/utils/urdf/urdf.hpp>
      #include <dart/gui/gui.hpp>
    postinclude:
      '/* main postinclude */'
    prebody:
      '/* main prebody */'
    precontent:
      '/* main precontent */'

#==============================================================================
#
# Namespaces: The C++ namespaces that will be extracted by Chimera
#
#==============================================================================
namespaces:
  'dart':
    name: null  # Collapse the 'dart' namespace into its parent.

#==============================================================================
#
# Types: Selected types that need special handling.
#
#==============================================================================
types:

  #----------------------------------------------------------------------------
  # dart::common
  #----------------------------------------------------------------------------

  # Disable const pointers
  'const dart::common::Aspect::State *': null
  'const dart::common::Aspect::Properties *': null

  'dart::common::UriComponent::reference_type':
    return_value_policy: reference

  # 'dart::common::UriComponent::reference_const_type':
  #   return_value_policy: reference

  # 'dart::common::UriComponent::reference_type':
  #   return_value_policy: 

  # 'dart::common::UriComponent::reference_type':
  #   return_value_policy: 

  # 'dart::common::UriComponent::reference_type':
  #   return_value_policy: 

#==============================================================================
#
# Classes: Selected function and class declarations that need custom parameters.
#
#==============================================================================
classes:

  #----------------------------------------------------------------------------
  # dart::common
  #----------------------------------------------------------------------------

  # Hide details
  'dart::common::CloneableMap<std::map<std::type_index, std::unique_ptr<dart::common::Aspect::State, std::default_delete<dart::common::Aspect::State> >, std::less<std::type_index>, std::allocator<std::pair<const std::type_index, std::unique_ptr<dart::common::Aspect::State, std::default_delete<dart::common::Aspect::State> > > > > >': null
  'dart::common::CloneableMap<std::map<std::type_index, std::unique_ptr<dart::common::Aspect::Properties, std::default_delete<dart::common::Aspect::Properties> >, std::less<std::type_index>, std::allocator<std::pair<const std::type_index, std::unique_ptr<dart::common::Aspect::Properties, std::default_delete<dart::common::Aspect::Properties> > > > > >': null

  # Held type
  'dart::common::ResourceRetriever':
    held_type: std::shared_ptr<dart::common::ResourceRetriever>
  'dart::common::LocalResourceRetriever':
    held_type: std::shared_ptr<dart::common::LocalResourceRetriever>

  # Name mangling
  'dart::common::Cloneable<dart::common::Aspect::Properties>':
    name: CloneableAspectProperties
  'dart::common::Cloneable<dart::common::Aspect::State>':
    name: CloneableAspectState
  'dart::common::detail::CompositeData<std::map<std::type_index, std::unique_ptr<dart::common::Aspect::State, std::default_delete<dart::common::Aspect::State> >, std::less<std::type_index>, std::allocator<std::pair<const std::type_index, std::unique_ptr<dart::common::Aspect::State, std::default_delete<dart::common::Aspect::State> > > > >, dart::common::detail::GetState>':
    name: CompositeData_Map_TypeIndex_AspectState
  'dart::common::detail::CompositeData<std::map<std::type_index, std::unique_ptr<dart::common::Aspect::Properties, std::default_delete<dart::common::Aspect::Properties> >, std::less<std::type_index>, std::allocator<std::pair<const std::type_index, std::unique_ptr<dart::common::Aspect::Properties, std::default_delete<dart::common::Aspect::Properties> > > > >, dart::common::detail::GetProperties>':
    name: CompositeData_Map_TypeIndex_AspectProperties

  # TODO(JS)
  # 'dart::common::UriComponent': null

  # TODO(JS): Disabled until nested enumeration issue is resolved.
  # See: https://github.com/personalrobotics/chimera/issues/202
  'dart::common::SharedLibrary': null

#==============================================================================
#
# Functions
#
#==============================================================================
functions:

  #----------------------------------------------------------------------------
  # dart::common
  #----------------------------------------------------------------------------

  # rvalue
  'dart::common::Connection::Connection(dart::common::Connection&&)': null
  'dart::common::ScopedConnection::ScopedConnection(dart::common::Connection&&)': null

  # const reference return
  'dart::common::UriComponent::reference_const_type dart::common::UriComponent::get() const': null
  'dart::common::UriComponent::reference_const_type dart::common::UriComponent::get_value_or(dart::common::UriComponent::reference_const_type) const': null

  # TODO(JS): Incompete argument types.
  'std::size_t dart::common::Resource::read(void *, std::size_t, std::size_t)': null
  'std::size_t dart::common::LocalResource::read(void *, std::size_t, std::size_t)': null

  # TODO(JS): Disabled until nested enumeration issue is resolved.
  # See: https://github.com/personalrobotics/chimera/issues/202
  'bool dart::common::Resource::seek(ptrdiff_t, dart::common::Resource::SeekType)': null
